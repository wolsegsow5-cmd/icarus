<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PumpSim - Ã‡Ã¶kmeyen SÃ¼rÃ¼m</title>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: #0b0e14; color: #fff; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .header { width: 100%; max-width: 800px; display: flex; justify-content: space-between; padding: 15px 20px; background: #151924; border-radius: 8px; margin-bottom: 20px; box-sizing: border-box; border: 1px solid #2b313f; }
        .logo { font-size: 1.5em; font-weight: bold; color: #14F195; }
        .wallet { font-size: 1.2em; font-weight: bold; color: #fff; background: #222836; padding: 10px 15px; border-radius: 5px; }
        
        .container { width: 100%; max-width: 800px; background: #151924; padding: 20px; border-radius: 8px; border: 1px solid #2b313f; text-align: center; }
        
        #setupScreen { display: block; padding: 40px 0; }
        input[type="text"] { width: 60%; padding: 15px; font-size: 1.5em; text-align: center; border-radius: 5px; border: 2px solid #2b313f; background: #0b0e14; color: white; text-transform: uppercase; font-weight: bold; }
        .btn-launch { background: #14F195; color: black; font-size: 1.3em; font-weight: bold; padding: 15px 40px; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px; transition: 0.1s; }
        .btn-launch:active { transform: scale(0.95); }

        #marketScreen { display: none; }
        .top-info { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .coin-name { font-size: 2em; font-weight: bold; }
        .price { font-size: 2em; color: #26a69a; font-family: monospace; font-weight: bold; }
        .inventory { text-align: left; color: #aaa; margin-bottom: 10px; font-size: 1.1em; }
        
        #chart { width: 100%; height: 400px; background: #0b0e14; border-radius: 5px; border: 1px solid #2b313f; }

        .controls { display: flex; gap: 15px; margin-top: 20px; }
        .btn { flex: 1; padding: 20px; font-size: 1.5em; font-weight: bold; border: none; border-radius: 5px; cursor: pointer; color: white; transition: 0.1s; }
        .btn-buy { background: #26a69a; }
        .btn-buy:active { background: #1d7d74; transform: scale(0.95); }
        .btn-sell { background: #ef5350; }
        .btn-sell:active { background: #c63936; transform: scale(0.95); }
    </style>
</head>
<body>

    <div class="header">
        <div class="logo">ðŸ’Š PumpSim</div>
        <div class="wallet">USD: $<span id="cashDisplay">2000.00</span></div>
    </div>

    <div class="container" id="setupScreen">
        <h2>ðŸš€ Lansmana HazÄ±r MÄ±sÄ±n?</h2>
        <input type="text" id="coinInput" value="PUMA" placeholder="COIN ADI GÄ°R">
        <br>
        <button class="btn-launch" onclick="baslat()">Piyasaya SÃ¼r</button>
    </div>

    <div class="container" id="marketScreen">
        <div class="top-info">
            <div class="coin-name" id="nameDisplay">COIN</div>
            <div class="price">$<span id="priceDisplay">0.001000</span></div>
        </div>
        <div class="inventory" id="tokenDisplay">CÃ¼zdan: 0 Adet</div>
        
        <div id="chart"></div>

        <div class="controls">
            <button class="btn btn-buy" onclick="al()">AL (100$)</button>
            <button class="btn btn-sell" onclick="sat()">TÃœMÃœNÃœ SAT</button>
        </div>
    </div>

<script>
    // DEÄžÄ°ÅžKENLER
    let bakiyeUSD = 2000.00;
    let bakiyeToken = 0;
    let fiyat = 0.001000;
    
    // GRAFÄ°K DEÄžÄ°ÅžKENLERÄ°
    let chart;
    let mumVerileri = [];
    let aktifMum = null;
    let zamanSayaci = new Date().getTime();

    // SÄ°STEMÄ° BAÅžLAT
    function baslat() {
        let isim = document.getElementById("coinInput").value.trim().toUpperCase();
        if(isim === "") isim = "PUMA";
        
        document.getElementById("nameDisplay").innerText = "$" + isim;
        document.getElementById("setupScreen").style.display = "none";
        document.getElementById("marketScreen").style.display = "block";
        
        grafikKur();
        arayuzuGuncelle();
        
        // Arka plan hareketleri
        setInterval(piyasaHareketi, 2000);
        setInterval(yeniMumAc, 5000);
    }

    // ARAYÃœZ GÃœNCELLEME (ButonlarÄ±n kitlenmemesini saÄŸlayan ana yapÄ±)
    function arayuzuGuncelle() {
        document.getElementById("cashDisplay").innerText = bakiyeUSD.toFixed(2);
        document.getElementById("priceDisplay").innerText = fiyat.toFixed(6);
        document.getElementById("tokenDisplay").innerText = "CÃ¼zdan: " + Math.floor(bakiyeToken).toLocaleString() + " Adet";
        
        // Rengi ayarla
        if(aktifMum && fiyat >= aktifMum.y[0]) {
            document.getElementById("priceDisplay").style.color = "#26a69a";
        } else {
            document.getElementById("priceDisplay").style.color = "#ef5350";
        }
    }

    // AL BUTONU
    function al() {
        if(bakiyeUSD >= 100) {
            let alinanMiktar = 100 / fiyat;
            bakiyeUSD -= 100;
            bakiyeToken += alinanMiktar;
            
            // FiyatÄ± yapay olarak %4 ile %10 arasÄ± fÄ±rlat
            fiyat = fiyat * (1 + (Math.random() * 0.06 + 0.04));
            
            arayuzuGuncelle();
            grafikGuncelle(fiyat);
        } else {
            alert("Bakiyen Yetersiz!");
        }
    }

    // SAT BUTONU
    function sat() {
        if(bakiyeToken > 0) {
            let eldeEdilen = bakiyeToken * fiyat;
            bakiyeUSD += eldeEdilen;
            bakiyeToken = 0;
            
            // FiyatÄ± yapay olarak %5 ile %15 arasÄ± Ã§ak
            fiyat = fiyat * (1 - (Math.random() * 0.10 + 0.05));
            if(fiyat < 0.000001) fiyat = 0.000001;
            
            arayuzuGuncelle();
            grafikGuncelle(fiyat);
        } else {
            alert("Satacak Coin Yok!");
        }
    }

    // GRAFÄ°K KURULUMU
    function grafikKur() {
        var options = {
            series: [{ data: [] }],
            chart: { type: 'candlestick', height: 400, background: '#0b0e14', animations: { enabled: false }, toolbar: { show: false } },
            theme: { mode: 'dark' },
            xaxis: { type: 'datetime', labels: { show: false }, axisBorder: { show: false } },
            yaxis: { tooltip: { enabled: true }, labels: { formatter: function(val) { return val.toFixed(6); } } },
            plotOptions: { candlestick: { colors: { upward: '#26a69a', downward: '#ef5350' }, wick: { useFillColor: true } } },
            grid: { borderColor: '#2b313f' }
        };

        chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();
        
        yeniMumAc();
    }

    // YENÄ° MUM OLUÅžTUR
    function yeniMumAc() {
        zamanSayaci += 5000; 
        aktifMum = {
            x: zamanSayaci,
            y: [fiyat, fiyat, fiyat, fiyat] // [AÃ§Ä±lÄ±ÅŸ, En YÃ¼ksek, En DÃ¼ÅŸÃ¼k, KapanÄ±ÅŸ]
        };
        
        mumVerileri.push(aktifMum);
        if(mumVerileri.length > 30) mumVerileri.shift(); // GrafiÄŸi temiz tut
        
        try { chart.updateSeries([{ data: mumVerileri }]); } catch(e){}
    }

    // MEVCUT MUMU GÃœNCELLE
    function grafikGuncelle(yeniFiyat) {
        if(!aktifMum) return;
        
        aktifMum.y[3] = yeniFiyat; // KapanÄ±ÅŸÄ± gÃ¼ncelle
        if(yeniFiyat > aktifMum.y[1]) aktifMum.y[1] = yeniFiyat; // En yÃ¼kseÄŸi gÃ¼ncelle
        if(yeniFiyat < aktifMum.y[2]) aktifMum.y[2] = yeniFiyat; // En dÃ¼ÅŸÃ¼ÄŸÃ¼ gÃ¼ncelle
        
        try { chart.updateSeries([{ data: mumVerileri }]); } catch(e){}
    }

    // BOT HAREKETLERÄ°
    function piyasaHareketi() {
        let dalgalanma = 1 + (Math.random() * 0.02 - 0.01); // %1 yukarÄ± veya aÅŸaÄŸÄ±
        fiyat = fiyat * dalgalanma;
        
        arayuzuGuncelle();
        grafikGuncelle(fiyat);
    }
</script>

</body>
</html>
